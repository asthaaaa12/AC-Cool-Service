<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AC Service & Repair</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <style>
      html {
        scroll-behavior: smooth;
      }
      .faq-toggle .fa-chevron-down {
        transition: transform 0.3s ease-in-out;
      }
      .faq-toggle.active .fa-chevron-down {
        transform: rotate(180deg);
      }
      .service-card {
        transition: all 0.3s ease-in-out;
      }
      .service-card:hover {
        transform: translateY(-0.5rem);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }
      .star-rating .fa-star {
        color: #d1d5db;
        cursor: pointer;
        transition: color 0.2s;
      }
      .star-rating .fa-star.selected,
      .star-rating .fa-star:hover {
        color: #f59e0b;
      }
      .modal-overlay {
        transition: opacity 0.3s ease;
      }
    </style>
  </head>
  <body class="bg-gray-50 font-sans antialiased">
    <div id="main-content">
      <header class="bg-white shadow-md sticky top-0 z-50">
        <nav
          class="container mx-auto px-6 py-4 flex justify-between items-center"
        >
          <a
            href="#"
            class="text-2xl font-bold text-blue-800"
            data-translate="nav_brand"
            >AC Cool Services</a
          >
          <div class="hidden md:flex items-center space-x-8">
            <a
              href="#home"
              class="text-gray-600 hover:text-blue-800 transition"
              data-translate="nav_home"
              >Home</a
            >
            <a
              href="#services"
              class="text-gray-600 hover:text-blue-800 transition"
              data-translate="nav_services"
              >Services</a
            >
            <a
              href="#about"
              class="text-gray-600 hover:text-blue-800 transition"
              data-translate="nav_about"
              >About Us</a
            >
            <a
              href="#testimonials"
              class="text-gray-600 hover:text-blue-800 transition"
              data-translate="nav_testimonials"
              >Testimonials</a
            >
            <a
              href="#contact"
              class="text-gray-600 hover:text-blue-800 transition"
              data-translate="nav_contact"
              >Contact</a
            >
          </div>
          <div class="flex items-center">
            <div class="language-switcher mr-4">
              <select
                id="language-toggle"
                class="bg-gray-100 border-2 border-gray-200 rounded-md py-1 px-2 text-gray-700 focus:outline-none focus:border-blue-500"
              >
                <option value="en">English</option>
                <option value="hi">हिन्दी</option>
                <option value="gu">ગુજરાતી</option>
              </select>
            </div>
            <a
              href="#booking"
              class="bg-blue-700 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-800 transition duration-300 hidden md:block"
              data-translate="nav_booking"
              >Book Service</a
            >
            <button
              id="mobile-menu-button"
              class="md:hidden text-gray-600 focus:outline-none ml-4"
            >
              <i class="fas fa-bars text-2xl"></i>
            </button>
          </div>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden bg-white">
          <a
            href="#home"
            class="block py-2 px-6 text-gray-600 hover:bg-blue-50"
            data-translate="nav_home"
            >Home</a
          >
          <a
            href="#services"
            class="block py-2 px-6 text-gray-600 hover:bg-blue-50"
            data-translate="nav_services"
            >Services</a
          >
          <a
            href="#about"
            class="block py-2 px-6 text-gray-600 hover:bg-blue-50"
            data-translate="nav_about"
            >About Us</a
          >
          <a
            href="#testimonials"
            class="block py-2 px-6 text-gray-600 hover:bg-blue-50"
            data-translate="nav_testimonials"
            >Testimonials</a
          >
          <a
            href="#contact"
            class="block py-2 px-6 text-gray-600 hover:bg-blue-50"
            data-translate="nav_contact"
            >Contact</a
          >
          <a
            href="#booking"
            class="block py-3 px-6 text-white bg-blue-700 hover:bg-blue-800"
            data-translate="nav_booking"
            >Book Service</a
          >
        </div>
      </header>

      <section id="home" class="bg-blue-800 text-white">
        <div class="container mx-auto px-6 py-32 text-center">
          <h1
            class="text-5xl md:text-7xl font-bold mb-4 leading-tight"
            data-translate="hero_title"
          >
            Reliable AC Service & Repair
          </h1>
          <p
            class="text-lg md:text-xl text-blue-200 mb-8 max-w-3xl mx-auto"
            data-translate="hero_subtitle"
          >
            Fast, affordable, and professional AC solutions for your home and
            business. Your comfort is our priority.
          </p>
          <a
            href="#booking"
            class="bg-white text-blue-800 font-bold py-3 px-8 rounded-lg hover:bg-blue-100 transition duration-300 transform hover:scale-105"
            data-translate="hero_cta"
            >Schedule a Visit Today</a
          >
        </div>
      </section>

      <section id="services" class="py-20">
        <div class="container mx-auto px-6">
          <h2
            class="text-3xl font-bold text-center text-gray-800 mb-12"
            data-translate="services_title"
          >
            Our Services
          </h2>
          <div
            id="services-container"
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"
          ></div>
        </div>
      </section>

      <section id="about" class="py-20 bg-white">
        <div class="container mx-auto px-6">
          <h2
            class="text-3xl font-bold text-center text-gray-800 mb-4"
            data-translate="about_title"
          >
            About AC Cool Services
          </h2>
          <p
            class="text-center text-gray-500 mb-12 max-w-2xl mx-auto"
            data-translate="about_subtitle"
          >
            Your trusted partner for all air conditioning needs.
          </p>
          <div class="flex flex-col md:flex-row items-center gap-12">
            <div class="md:w-1/2">
              <img
                src="https://placehold.co/600x400/3B82F6/FFFFFF?text=Our+Team"
                alt="AC Service Team"
                class="rounded-lg shadow-xl w-full"
              />
            </div>
            <div class="md:w-1/2 text-gray-700 space-y-4 text-lg">
              <p data-translate="about_desc_p1">
                At AC Cool Services, we are dedicated to providing top-quality
                air conditioning installation, repair, and maintenance services.
                With years of experience in the industry, our team of certified
                technicians is equipped to handle any challenge, ensuring your
                AC systems run efficiently and reliably.
              </p>
              <p data-translate="about_desc_p2">
                Our mission is simple: to deliver exceptional customer service
                and technical expertise at competitive prices. We pride
                ourselves on our professionalism, punctuality, and commitment to
                keeping you cool and comfortable all year round.
              </p>
            </div>
          </div>
        </div>
      </section>

      <section id="booking" class="bg-gray-100 py-20">
        <div class="container mx-auto px-6">
          <div
            class="bg-white rounded-lg shadow-xl p-8 md:p-12 max-w-3xl mx-auto"
          >
            <h2
              class="text-3xl font-bold text-center text-gray-800 mb-2"
              data-translate="booking_title"
            >
              Book Your Service
            </h2>
            <p
              class="text-center text-gray-500 mb-8"
              data-translate="booking_subtitle"
            >
              Fill out the form and we'll get in touch!
            </p>
            <form id="booking-form">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                  <label
                    for="name"
                    class="block text-gray-700 font-medium mb-2"
                    data-translate="form_name"
                    >Name</label
                  >
                  <input
                    type="text"
                    id="name"
                    name="name"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    required
                  />
                </div>
                <div>
                  <label
                    for="phone"
                    class="block text-gray-700 font-medium mb-2"
                    data-translate="form_phone"
                    >Phone Number</label
                  >
                  <input
                    type="tel"
                    id="phone"
                    name="phone"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    required
                  />
                </div>
              </div>
              <div class="mb-6">
                <label
                  for="address"
                  class="block text-gray-700 font-medium mb-2"
                  data-translate="form_address"
                  >Address</label
                >
                <textarea
                  id="address"
                  name="address"
                  rows="3"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                ></textarea>
              </div>
              <div class="mb-6">
                <label
                  for="service-select"
                  class="block text-gray-700 font-medium mb-2"
                  data-translate="form_service"
                  >Select Service</label
                >
                <select
                  id="service-select"
                  name="service"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                >
                  <option value="">-- Choose a service --</option>
                </select>
              </div>
              <div class="mb-8">
                <label
                  for="date"
                  class="block text-gray-700 font-medium mb-2"
                  data-translate="form_date"
                  >Preferred Date</label
                >
                <input
                  type="date"
                  id="date"
                  name="date"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                />
              </div>
              <div class="text-center">
                <button
                  type="submit"
                  class="bg-blue-700 text-white font-bold py-3 px-10 rounded-lg hover:bg-blue-800 transition duration-300 w-full md:w-auto"
                  data-translate="form_submit_btn"
                >
                  Book Now
                </button>
              </div>
            </form>
            <div id="form-message" class="mt-6 text-center"></div>
          </div>
        </div>
      </section>

      <section id="testimonials" class="py-20">
        <div class="container mx-auto px-6">
          <h2
            class="text-3xl font-bold text-center text-gray-800 mb-12"
            data-translate="testimonials_title"
          >
            What Our Customers Say
          </h2>
          <div
            id="testimonials-container"
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"
          ></div>
        </div>
      </section>

      <section id="add-review" class="bg-gray-100 py-20">
        <div class="container mx-auto px-6">
          <div
            class="bg-white rounded-lg shadow-xl p-8 md:p-12 max-w-3xl mx-auto"
          >
            <h2
              class="text-3xl font-bold text-center text-gray-800 mb-2"
              data-translate="review_form_title"
            >
              Leave a Review
            </h2>
            <p
              class="text-center text-gray-500 mb-8"
              data-translate="review_form_subtitle"
            >
              Share your experience with us!
            </p>
            <form id="review-form">
              <div class="mb-4">
                <label
                  for="review-name"
                  class="block text-gray-700 font-medium mb-2"
                  data-translate="review_form_name"
                  >Your Name</label
                >
                <input
                  type="text"
                  id="review-name"
                  name="name"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                />
              </div>
              <div class="mb-4">
                <label
                  class="block text-gray-700 font-medium mb-2"
                  data-translate="review_form_rating"
                  >Your Rating</label
                >
                <div id="star-rating-input" class="star-rating text-3xl">
                  <i class="fas fa-star" data-value="1"></i
                  ><i class="fas fa-star" data-value="2"></i
                  ><i class="fas fa-star" data-value="3"></i
                  ><i class="fas fa-star" data-value="4"></i
                  ><i class="fas fa-star" data-value="5"></i>
                </div>
                <input
                  type="hidden"
                  id="rating-value"
                  name="rating"
                  value="0"
                />
              </div>
              <div class="mb-6">
                <label
                  for="review-text"
                  class="block text-gray-700 font-medium mb-2"
                  data-translate="review_form_message"
                  >Review</label
                >
                <textarea
                  id="review-text"
                  name="review"
                  rows="4"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                ></textarea>
              </div>
              <div class="text-center">
                <button
                  type="submit"
                  class="bg-blue-700 text-white font-bold py-3 px-10 rounded-lg hover:bg-blue-800 transition duration-300 w-full md:w-auto"
                  data-translate="review_form_submit_btn"
                >
                  Submit Review
                </button>
              </div>
            </form>
            <div id="review-form-message" class="mt-6 text-center"></div>
          </div>
        </div>
      </section>

      <section id="faq" class="py-20 bg-white">
        <div class="container mx-auto px-6 max-w-3xl">
          <h2
            class="text-3xl font-bold text-center text-gray-800 mb-12"
            data-translate="faq_title"
          >
            Frequently Asked Questions
          </h2>
          <div class="space-y-4">
            <div class="bg-gray-50 rounded-lg shadow-md">
              <button
                class="faq-toggle w-full text-left p-6 flex justify-between items-center"
              >
                <span
                  class="font-semibold text-lg"
                  data-translate="faq_q1_title"
                  >Which brands of AC do you service?</span
                ><i class="fas fa-chevron-down transition-transform"></i>
              </button>
              <div
                class="faq-content max-h-0 overflow-hidden transition-all duration-500 ease-in-out"
              >
                <p class="p-6 pt-0 text-gray-600" data-translate="faq_q1_desc">
                  We service all major AC brands, including Voltas, LG, Samsung,
                  Daikin, Hitachi, Blue Star, and more. Our technicians are
                  trained to handle a wide variety of models.
                </p>
              </div>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md">
              <button
                class="faq-toggle w-full text-left p-6 flex justify-between items-center"
              >
                <span
                  class="font-semibold text-lg"
                  data-translate="faq_q2_title"
                  >How often should I get my AC serviced?</span
                ><i class="fas fa-chevron-down transition-transform"></i>
              </button>
              <div
                class="faq-content max-h-0 overflow-hidden transition-all duration-500 ease-in-out"
              >
                <p class="p-6 pt-0 text-gray-600" data-translate="faq_q2_desc">
                  For optimal performance and longevity, we recommend a general
                  service at least once a year, preferably before the summer
                  season begins. This helps in cleaning the filters, checking
                  coolant levels, and ensuring all parts are working correctly.
                </p>
              </div>
            </div>
            <div class="bg-gray-50 rounded-lg shadow-md">
              <button
                class="faq-toggle w-full text-left p-6 flex justify-between items-center"
              >
                <span
                  class="font-semibold text-lg"
                  data-translate="faq_q3_title"
                  >What are the signs that my AC needs a repair?</span
                ><i class="fas fa-chevron-down transition-transform"></i>
              </button>
              <div
                class="faq-content max-h-0 overflow-hidden transition-all duration-500 ease-in-out"
              >
                <p class="p-6 pt-0 text-gray-600" data-translate="faq_q3_desc">
                  Common signs include reduced cooling, strange noises or
                  vibrations, water leakage from the indoor unit, or the AC
                  frequently turning on and off. If you notice any of these,
                  it's best to get it checked.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="contact" class="py-20 bg-gray-100">
        <div class="container mx-auto px-6">
          <h2
            class="text-3xl font-bold text-center text-gray-800 mb-4"
            data-translate="contact_title"
          >
            Get In Touch
          </h2>
          <p
            class="text-center text-gray-500 mb-12 max-w-2xl mx-auto"
            data-translate="contact_subtitle"
          >
            We're here to help! Reach out to us for any inquiries or to schedule
            a service.
          </p>
          <div class="grid md:grid-cols-2 gap-12">
            <div class="bg-white p-8 rounded-lg shadow-lg">
              <h3
                class="text-xl font-bold mb-6 text-gray-800"
                data-translate="contact_details_title"
              >
                Contact Details
              </h3>
              <div class="space-y-6 text-gray-700 text-lg">
                <div class="flex items-center">
                  <i class="fas fa-phone text-blue-700 w-6 text-xl"></i
                  ><span
                    ><a href="tel:+919825479311" class="hover:text-blue-700"
                      >+91 98254 79311</a
                    ></span
                  >
                </div>
                <div class="flex items-center">
                  <i class="fab fa-whatsapp text-green-500 w-6 text-xl"></i
                  ><span
                    ><a
                      href="https://wa.me/919825479311"
                      target="_blank"
                      class="hover:text-green-500"
                      >+91 98254 79311</a
                    ></span
                  >
                </div>
                <div class="flex items-center">
                  <i class="fas fa-envelope text-red-500 w-6 text-xl"></i
                  ><span
                    ><a
                      href="mailto:jagdishprajapati311@gmail.com"
                      class="hover:text-red-500"
                      >jagdishprajapati311@gmail.com</a
                    ></span
                  >
                </div>
                <div class="flex items-start">
                  <i
                    class="fas fa-map-marker-alt text-purple-500 w-6 text-xl pt-1"
                  ></i
                  ><span data-translate="contact_address"
                    >Serving Gandhidham, Kutch and surrounding areas.</span
                  >
                </div>
              </div>
            </div>
            <div class="bg-white rounded-lg shadow-lg overflow-hidden">
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d58733.24759957171!2d70.07776718237285!3d23.06676750841071!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3950b98e8bec0d97%3A0x9d6ccb522ee8f6e0!2sGandhidham%2C%20Gujarat!5e0!3m2!1sen!2sin!4v1754327433537!5m2!1sen!2sin"
                width="600"
                height="450"
                style="border: 0"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
              ></iframe>
            </div>
          </div>
        </div>
      </section>

      <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-6 text-center">
          <p class="mb-4" data-translate="footer_text">
            © 2025 AC Cool Services. All Rights Reserved.
          </p>
          <div class="flex justify-center space-x-6">
            <a
              href="https://wa.me/919825479311"
              target="_blank"
              class="text-2xl hover:text-green-400 transition"
              ><i class="fab fa-whatsapp"></i
            ></a>
            <a
              href="tel:+919825479311"
              class="text-2xl hover:text-blue-400 transition"
              ><i class="fas fa-phone"></i
            ></a>
            <a
              href="#"
              onclick="showLoginView()"
              class="text-2xl hover:text-gray-400 transition"
              ><i class="fas fa-user-shield"></i
            ></a>
          </div>
        </div>
      </footer>
    </div>

    <div
      id="admin-login-view"
      class="hidden bg-gray-100 min-h-screen flex items-center justify-center font-sans"
    >
      <div class="bg-white p-8 rounded-lg shadow-md w-full max-w-sm">
        <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">
          Admin Login
        </h2>
        <form id="login-form">
          <div class="mb-4">
            <label for="email" class="block text-gray-700 mb-2">Email</label
            ><input
              type="email"
              id="login-email"
              class="w-full px-3 py-2 border rounded-lg"
              placeholder="Enter your email"
              required
            />
          </div>
          <div class="mb-6">
            <label for="password" class="block text-gray-700 mb-2"
              >Password</label
            ><input
              type="password"
              id="login-password"
              class="w-full px-3 py-2 border rounded-lg"
              placeholder="Enter your password"
              required
            />
          </div>
          <button
            type="submit"
            class="w-full bg-blue-700 text-white py-2 rounded-lg hover:bg-blue-800 transition"
          >
            Login
          </button>
          <div id="error-message" class="mt-4 text-red-600 text-center"></div>
          <button
            type="button"
            onclick="showMainView()"
            class="w-full mt-4 bg-gray-600 text-white py-2 rounded-lg hover:bg-gray-700 transition"
          >
            Back to Website
          </button>
        </form>
      </div>
    </div>

    <div
      id="admin-dashboard-view"
      class="hidden bg-gray-100 min-h-screen font-sans"
    >
      <div class="container mx-auto px-4 py-8">
        <div class="flex justify-between items-center mb-8">
          <h1 class="text-3xl font-bold text-gray-800">Admin Dashboard</h1>
          <div>
            <button
              onclick="showMainView()"
              class="bg-blue-700 text-white py-2 px-4 rounded-lg hover:bg-blue-800 transition"
            >
              <i class="fas fa-home mr-2"></i>Website
            </button>
            <button
              id="logout-btn"
              class="bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition ml-4"
            >
              <i class="fas fa-sign-out-alt mr-2"></i>Logout
            </button>
          </div>
        </div>

        <div class="mb-12">
          <h2 class="text-2xl font-bold text-gray-800 mb-4">
            Financial Summary
          </h2>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-green-100 p-6 rounded-lg shadow">
              <h3 class="text-lg font-medium text-green-800">Total Revenue</h3>
              <p
                id="total-revenue"
                class="text-3xl font-bold text-green-900 mt-2"
              >
                ₹0
              </p>
            </div>
            <div class="bg-yellow-100 p-6 rounded-lg shadow">
              <h3 class="text-lg font-medium text-yellow-800">
                Pending Payments
              </h3>
              <p
                id="pending-payments"
                class="text-3xl font-bold text-yellow-900 mt-2"
              >
                ₹0
              </p>
            </div>
            <div class="bg-blue-100 p-6 rounded-lg shadow">
              <h3 class="text-lg font-medium text-blue-800">
                Completed Services
              </h3>
              <p
                id="completed-services"
                class="text-3xl font-bold text-blue-900 mt-2"
              >
                0
              </p>
            </div>
          </div>
        </div>

        <div class="mb-12">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-2xl font-bold text-gray-800">Manage Services</h2>
            <button
              id="add-service-btn"
              class="bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition"
            >
              <i class="fas fa-plus mr-2"></i>Add New Service
            </button>
          </div>
          <div class="bg-white shadow-md rounded-lg overflow-x-auto">
            <table class="w-full table-auto">
              <thead class="bg-gray-200">
                <tr>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider"
                  >
                    Title
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider"
                  >
                    Price
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider"
                  >
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody
                id="services-table-body"
                class="divide-y divide-gray-200"
              ></tbody>
            </table>
          </div>
        </div>

        <div class="mb-12">
          <h2 class="text-2xl font-bold text-gray-800 mb-4">Manage Bookings</h2>
          <div class="bg-white shadow-md rounded-lg overflow-x-auto">
            <table class="w-full table-auto">
              <thead class="bg-gray-200">
                <tr>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider"
                  >
                    Customer
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider"
                  >
                    Service
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider"
                  >
                    Date
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider"
                  >
                    Status
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider"
                  >
                    Payment
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider"
                  >
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody
                id="bookings-table-body"
                class="divide-y divide-gray-200"
              ></tbody>
            </table>
          </div>
        </div>

        <div>
          <h2 class="text-2xl font-bold text-gray-800 mb-4">Manage Reviews</h2>
          <div class="bg-white shadow-md rounded-lg overflow-x-auto">
            <table class="w-full table-auto">
              <thead class="bg-gray-200">
                <tr>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider"
                  >
                    Reviewer
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider"
                  >
                    Review
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider"
                  >
                    Rating
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider"
                  >
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody
                id="reviews-table-body"
                class="divide-y divide-gray-200"
              ></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div
      id="service-modal"
      class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 modal-overlay opacity-0"
    >
      <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-md">
        <h2
          id="service-modal-title"
          class="text-2xl font-bold text-gray-800 mb-6"
        ></h2>
        <form id="service-form">
          <input type="hidden" id="service-id" />
          <div class="mb-4">
            <label
              for="service-title"
              class="block text-gray-700 font-medium mb-2"
              >Service Title</label
            >
            <input
              type="text"
              id="service-title"
              name="title"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg"
              required
            />
          </div>
          <div class="mb-4">
            <label
              for="service-description"
              class="block text-gray-700 font-medium mb-2"
              >Description</label
            >
            <textarea
              id="service-description"
              name="description"
              rows="4"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg"
              required
            ></textarea>
          </div>
          <div class="mb-6">
            <label
              for="service-price"
              class="block text-gray-700 font-medium mb-2"
              >Price (e.g., ₹599 or Custom)</label
            >
            <input
              type="text"
              id="service-price"
              name="price"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg"
              required
            />
          </div>
          <div class="mb-6">
            <label
              for="service-icon"
              class="block text-gray-700 font-medium mb-2"
              >Icon (Font Awesome class, e.g., fa-tools)</label
            >
            <input
              type="text"
              id="service-icon"
              name="icon"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg"
              required
            />
          </div>
          <div class="flex justify-end space-x-4">
            <button
              type="button"
              id="cancel-service-form"
              class="bg-gray-200 text-gray-800 py-2 px-6 rounded-lg hover:bg-gray-300"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="bg-blue-700 text-white py-2 px-6 rounded-lg hover:bg-blue-800"
            >
              Save Service
            </button>
          </div>
        </form>
      </div>
    </div>

    <script id="language-json" type="application/json">
      {
        "en": {
          "nav_brand": "AC Cool Services",
          "nav_home": "Home",
          "nav_services": "Services",
          "nav_about": "About Us",
          "nav_testimonials": "Testimonials",
          "nav_contact": "Contact",
          "nav_booking": "Book Service",
          "hero_title": "Reliable AC Service & Repair",
          "hero_subtitle": "Fast, affordable, and professional AC solutions for your home and business. Your comfort is our priority.",
          "hero_cta": "Schedule a Visit Today",
          "services_title": "Our Services",
          "about_title": "About AC Cool Services",
          "about_subtitle": "Your trusted partner for all air conditioning needs.",
          "about_desc_p1": "At AC Cool Services, we are dedicated to providing top-quality air conditioning installation, repair, and maintenance services. With years of experience in the industry, our team of certified technicians is equipped to handle any challenge, ensuring your AC systems run efficiently and reliably.",
          "about_desc_p2": "Our mission is simple: to deliver exceptional customer service and technical expertise at competitive prices. We pride ourselves on our professionalism, punctuality, and commitment to keeping you cool and comfortable all year round.",
          "booking_title": "Book Your Service",
          "booking_subtitle": "Fill out the form and we'll get in touch!",
          "form_name": "Name",
          "form_phone": "Phone Number",
          "form_address": "Address",
          "form_service": "Select Service",
          "form_date": "Preferred Date",
          "form_submit_btn": "Book Now",
          "testimonials_title": "What Our Customers Say",
          "review_form_title": "Leave a Review",
          "review_form_subtitle": "Share your experience with us!",
          "review_form_name": "Your Name",
          "review_form_rating": "Your Rating",
          "review_form_message": "Review",
          "review_form_submit_btn": "Submit Review",
          "faq_title": "Frequently Asked Questions",
          "faq_q1_title": "Which brands of AC do you service?",
          "faq_q1_desc": "We service all major AC brands, including Voltas, LG, Samsung, Daikin, Hitachi, Blue Star, and more. Our technicians are trained to handle a wide variety of models.",
          "faq_q2_title": "How often should I get my AC serviced?",
          "faq_q2_desc": "For optimal performance and longevity, we recommend a general service at least once a year, preferably before the summer season begins.",
          "faq_q3_title": "What are the signs that my AC needs a repair?",
          "faq_q3_desc": "Common signs include reduced cooling, strange noises, water leakage, or the AC frequently turning on and off. If you notice any of these, it's best to get it checked.",
          "contact_title": "Get In Touch",
          "contact_subtitle": "We're here to help! Reach out to us for any inquiries or to schedule a service.",
          "contact_details_title": "Contact Details",
          "contact_address": "Serving Gandhidham, Kutch and surrounding areas.",
          "footer_text": "© 2025 AC Cool Services. All Rights Reserved."
        },
        "hi": {
          "nav_brand": "एसी कूल सर्विसेज",
          "nav_home": "होम",
          "nav_services": "सेवाएं",
          "nav_about": "हमारे बारे में",
          "nav_testimonials": "प्रशंसापत्र",
          "nav_contact": "संपर्क",
          "nav_booking": "सेवा बुक करें",
          "hero_title": "विश्वसनीय एसी सेवा और मरम्मत",
          "hero_subtitle": "आपके घर और व्यवसाय के लिए तेज़, किफायती और पेशेवर एसी समाधान। आपकी सुविधा हमारी प्राथमिकता है।",
          "hero_cta": "आज ही विज़िट शेड्यूल करें",
          "services_title": "हमारी सेवाएं",
          "about_title": "एसी कूल सर्विसेज के बारे में",
          "about_subtitle": "सभी एयर कंडीशनिंग जरूरतों के लिए आपका विश्वसनीय साथी।",
          "about_desc_p1": "एसी कूल सर्विसेज में, हम उच्च-गुणवत्ता वाली एयर कंडीशनिंग स्थापना, मरम्मत और रखरखाव सेवाएं प्रदान करने के लिए समर्पित हैं। उद्योग में वर्षों के अनुभव के साथ, हमारी प्रमाणित तकनीशियनों की टीम किसी भी चुनौती को संभालने के लिए सुसज्जित है, यह सुनिश्चित करते हुए कि आपके एसी सिस्टम कुशलतापूर्वक और मज़बूती से चलें।",
          "about_desc_p2": "हमारा मिशन सरल है: प्रतिस्पर्धी कीमतों पर असाधारण ग्राहक सेवा और तकनीकी विशेषज्ञता प्रदान करना। हम अपनी व्यावसायिकता, समय की पाबंदी, और आपको साल भर ठंडा और आरामदायक रखने की अपनी प्रतिबद्धता पर गर्व करते हैं।",
          "booking_title": "अपनी सेवा बुक करें",
          "booking_subtitle": "फॉर्म भरें और हम आपसे संपर्क करेंगे!",
          "form_name": "नाम",
          "form_phone": "फ़ोन नंबर",
          "form_address": "पता",
          "form_service": "सेवा चुनें",
          "form_date": "पसंदीदा तारीख",
          "form_submit_btn": "अभी बुक करें",
          "testimonials_title": "हमारे ग्राहक क्या कहते हैं",
          "review_form_title": "एक समीक्षा लिखें",
          "review_form_subtitle": "अपना अनुभव हमारे साथ साझा करें!",
          "review_form_name": "आपका नाम",
          "review_form_rating": "आपकी रेटिंग",
          "review_form_message": "समीक्षा",
          "review_form_submit_btn": "समीक्षा जमा करें",
          "faq_title": "अक्सर पूछे जाने वाले प्रश्न",
          "faq_q1_title": "आप किन ब्रांड के एसी की सर्विस करते हैं?",
          "faq_q1_desc": "हम वोल्टास, एलजी, सैमसंग, डाइकिन, हिताची, ब्लू स्टार, और अधिक सहित सभी प्रमुख एसी ब्रांडों की सर्विस करते हैं।",
          "faq_q2_title": "मुझे अपने एसी की सर्विस कितनी बार करानी चाहिए?",
          "faq_q2_desc": "सर्वोत्तम प्रदर्शन के लिए, हम साल में कम से कम एक बार सामान्य सर्विस की सलाह देते हैं, अधिमानतः गर्मी का मौसम शुरू होने से पहले।",
          "faq_q3_title": "मेरे एसी को मरम्मत की आवश्यकता होने के क्या संकेत हैं?",
          "faq_q3_desc": "सामान्य संकेतों में कूलिंग में कमी, अजीब शोर, इनडोर यूनिट से पानी का रिसाव, या एसी का बार-बार चालू और बंद होना शामिल है।",
          "contact_title": "संपर्क करें",
          "contact_subtitle": "हम सहायता के लिए यहां हैं! किसी भी पूछताछ या सेवा शेड्यूल करने के लिए हमसे संपर्क करें।",
          "contact_details_title": "संपर्क विवरण",
          "contact_address": "गांधीधाम, कच्छ और आसपास के क्षेत्रों में सेवारत।",
          "footer_text": "© 2025 एसी कूल सर्विसेज। सर्वाधिकार सुरक्षित।"
        },
        "gu": {
          "nav_brand": "એસી કૂલ સર્વિસિસ",
          "nav_home": "હોમ",
          "nav_services": "સેવાઓ",
          "nav_about": "અમારા વિશે",
          "nav_testimonials": "પ્રશંસાપત્રો",
          "nav_contact": "સંપર્ક",
          "nav_booking": "સેવા બુક કરો",
          "hero_title": "વિશ્વસનીય એસી સેવા અને સમારકામ",
          "hero_subtitle": "તમારા ઘર અને વ્યવસાય માટે ઝડપી, સસ્તું અને વ્યાવસાયિક એસી ઉકેલો. તમારી સુવિધા અમારી પ્રાથમિકતા છે.",
          "hero_cta": "આજે જ મુલાકાત શેડ્યૂલ કરો",
          "services_title": "અમારી સેવાઓ",
          "about_title": "એસી કૂલ સર્વિસિસ વિશે",
          "about_subtitle": "તમામ એર કન્ડીશનીંગ જરૂરિયાતો માટે તમારા વિશ્વસનીય ભાગીદાર.",
          "about_desc_p1": "એસી કૂલ સર્વિસિસમાં, અમે ઉચ્ચ-ગુણવત્તાવાળી એર કન્ડીશનીંગ ઇન્સ્ટોલેશન, રિપેર અને જાળવણી સેવાઓ પ્રદાન કરવા માટે સમર્પિત છીએ. ઉદ્યોગમાં વર્ષોના અનુભવ સાથે, અમારી પ્રમાણિત ટેકનિશિયનની ટીમ કોઈપણ પડકારને પહોંચી વળવા માટે સજ્જ છે, તે સુનિશ્ચિત કરે છે કે તમારી એસી સિસ્ટમ્સ અસરકારક અને વિશ્વસનીય રીતે ચાલે છે.",
          "about_desc_p2": "અમારું મિશન સરળ છે: સ્પર્ધાત્મક ભાવે અસાધારણ ગ્રાહક સેવા અને તકનીકી કુશળતા પ્રદાન કરવી. અમે અમારી વ્યાવસાયિકતા, સમયસરતા અને તમને આખું વર્ષ ઠંડુ અને આરામદાયક રાખવાની અમારી પ્રતિબદ્ધતા પર ગર્વ અનુભવીએ છીએ.",
          "booking_title": "તમારી સેવા બુક કરો",
          "booking_subtitle": "ફોર્મ ભરો અને અમે તમારો સંપર્ક કરીશું!",
          "form_name": "નામ",
          "form_phone": "ફોન નંબર",
          "form_address": "સરનામું",
          "form_service": "સેવા પસંદ કરો",
          "form_date": "પસંદગીની તારીખ",
          "form_submit_btn": "હમણાં બુક કરો",
          "testimonials_title": "અમારા ગ્રાહકો શું કહે છે",
          "review_form_title": "એક સમીક્ષા લખો",
          "review_form_subtitle": "તમારો અનુભવ અમારી સાથે શેર કરો!",
          "review_form_name": "તમારું નામ",
          "review_form_rating": "તમારું રેટિંગ",
          "review_form_message": "સમીક્ષા",
          "review_form_submit_btn": "સમીક્ષા સબમિટ કરો",
          "faq_title": "વારંવાર પૂછાતા પ્રશ્નો",
          "faq_q1_title": "તમે કઈ બ્રાન્ડની એસી સર્વિસ કરો છો?",
          "faq_q1_desc": "અમે વોલ્ટાસ, એલજી, સેમસંગ, ડાઇકિન, હિટાચી, બ્લુ સ્ટાર અને વધુ સહિતની તમામ મુખ્ય એસી બ્રાન્ડ્સની સેવા કરીએ છીએ.",
          "faq_q2_title": "મારે મારા એસીની સર્વિસ કેટલી વાર કરાવવી જોઈએ?",
          "faq_q2_desc": "શ્રેષ્ઠ કામગીરી માટે, અમે વર્ષમાં ઓછામાં ઓછું એકવાર સામાન્ય સેવાની ભલામણ કરીએ છીએ, પ્રાધાન્ય ઉનાળાની ઋતુ શરૂ થાય તે પહેલાં.",
          "faq_q3_title": "મારા એસીને સમારકામની જરૂર હોવાના સંકેતો શું છે?",
          "faq_q3_desc": "સામાન્ય સંકેતોમાં ઠંડકમાં ઘટાડો, વિચિત્ર અવાજો, ઇન્ડોર યુનિટમાંથી પાણીનું લિકેજ, અથવા એસીનું વારંવાર ચાલુ અને બંધ થવું શામેલ છે.",
          "contact_title": "સંપર્ક કરો",
          "contact_subtitle": "અમે મદદ કરવા માટે અહીં છીએ! કોઈપણ પૂછપરછ માટે અથવા સેવા શેડ્યૂલ કરવા માટે અમારો સંપર્ક કરો.",
          "contact_details_title": "સંપર્ક વિગતો",
          "contact_address": "ગાંધીધામ, કચ્છ અને આસપાસના વિસ્તારોમાં સેવા આપવી.",
          "footer_text": "© ૨૦૨૫ એસી કૂલ સર્વિસિસ. સર્વાધિકાર સુરક્ષિત।"
        }
      }
    </script>

    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // --- Firebase Configuration ---
        const firebaseConfig = {
          apiKey: "AIzaSyBaFz3R_u5sfrTIXIDrI7D7JA8W0DV3ywk", // Replace with your actual Firebase API key
          authDomain: "ac-cool-services.firebaseapp.com",
          projectId: "ac-cool-services",
          storageBucket: "ac-cool-services.appspot.com",
          messagingSenderId: "539902138286",
          appId: "1:539902138286:web:2d02477b5081561e989a3f",
        };

        // --- Initialize Firebase ---
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // --- Firebase Collection References ---
        const servicesCollection = db.collection("services");
        const bookingsCollection = db.collection("bookings");
        const reviewsCollection = db.collection("reviews");

        // --- App Constants ---
        const BUSINESS_PHONE = "919825479311";

        // --- View Management ---
        const mainContentView = document.getElementById("main-content");
        const adminLoginView = document.getElementById("admin-login-view");
        const adminDashboardView = document.getElementById(
          "admin-dashboard-view"
        );

        window.showMainView = () => {
          mainContentView.classList.remove("hidden");
          adminLoginView.classList.add("hidden");
          adminDashboardView.classList.add("hidden");
          window.scrollTo(0, 0);
        };

        window.showLoginView = () => {
          mainContentView.classList.add("hidden");
          adminLoginView.classList.remove("hidden");
          adminDashboardView.classList.add("hidden");
        };

        window.showDashboardView = () => {
          mainContentView.classList.add("hidden");
          adminLoginView.classList.add("hidden");
          adminDashboardView.classList.remove("hidden");
          renderAllAdmin();
        };

        // --- Language Translation ---
        const languageToggle = document.getElementById("language-toggle");
        const loadTranslations = () => {
          const savedLang = localStorage.getItem("language") || "en";
          languageToggle.value = savedLang;
          translatePage(savedLang);
        };
        const translatePage = (lang) => {
          const translations = JSON.parse(
            document.getElementById("language-json").textContent
          );
          document.querySelectorAll("[data-translate]").forEach((el) => {
            const key = el.getAttribute("data-translate");
            if (translations[lang] && translations[lang][key]) {
              el.innerHTML = translations[lang][key];
            }
          });
          document.documentElement.lang = lang;
          localStorage.setItem("language", lang);
        };
        languageToggle.addEventListener("change", (e) =>
          translatePage(e.target.value)
        );

        // --- Mobile Menu Toggle ---
        document
          .getElementById("mobile-menu-button")
          .addEventListener("click", () =>
            document.getElementById("mobile-menu").classList.toggle("hidden")
          );

        // --- FAQ Toggle ---
        document.querySelectorAll(".faq-toggle").forEach((toggle) => {
          toggle.addEventListener("click", () => {
            const content = toggle.nextElementSibling;
            toggle.classList.toggle("active");
            content.style.maxHeight = toggle.classList.contains("active")
              ? content.scrollHeight + "px"
              : "0px";
          });
        });

        // --- PUBLIC RENDERING FUNCTIONS ---
        const renderServices = async () => {
          const servicesContainer =
            document.getElementById("services-container");
          const serviceSelect = document.getElementById("service-select");

          servicesContainer.innerHTML = "";
          serviceSelect.innerHTML =
            '<option value="">-- Choose a service --</option>';

          try {
            const snapshot = await servicesCollection.orderBy("title").get();
            snapshot.forEach((doc) => {
              const service = { id: doc.id, ...doc.data() };

              // Render service card for the "Our Services" section
              const descriptionHTML = service.description.includes("\\n")
                ? `<ul class="text-gray-600 list-disc list-inside space-y-1">${service.description
                    .replace(/\\n/g, "\n")
                    .split("\n")
                    .map((line) => `<li>${line}</li>`)
                    .join("")}</ul>`
                : `<p class="text-gray-600 mb-4 flex-grow">${service.description}</p>`;
              const card = `
                        <div class="bg-white rounded-lg shadow-lg p-8 service-card flex flex-col">
                            <div class="text-blue-700 mb-4"><i class="fas ${
                              service.icon || "fa-cog"
                            } text-4xl"></i></div>
                            <h3 class="text-xl font-bold mb-2">${
                              service.title
                            }</h3>
                            <div class="flex-grow">${descriptionHTML}</div>
                            <div class="text-2xl font-bold text-gray-800 mt-4">${
                              service.price
                            }</div>
                        </div>`;
              servicesContainer.innerHTML += card;

              // Populate the booking form's dropdown
              const option = document.createElement("option");
              option.value = `${service.title} - ${service.price}`;
              option.textContent = `${service.title} - ${service.price}`;
              serviceSelect.appendChild(option);
            });
          } catch (error) {
            console.error("Error fetching services: ", error);
            servicesContainer.innerHTML =
              "<p>Could not load services. Please try again later.</p>";
          }
        };

        const renderReviews = async () => {
          const testimonialsContainer = document.getElementById(
            "testimonials-container"
          );
          testimonialsContainer.innerHTML = "";
          try {
            const snapshot = await reviewsCollection
              .orderBy("createdAt", "desc")
              .get();
            if (snapshot.empty) {
              testimonialsContainer.innerHTML = `<p class="text-center text-gray-500 md:col-span-3">Be the first to leave a review!</p>`;
              return;
            }
            snapshot.forEach((doc) => {
              const review = doc.data();
              const starsHTML = Array(5)
                .fill(0)
                .map(
                  (_, i) =>
                    `<i class="fas fa-star ${
                      i < review.rating ? "text-yellow-400" : "text-gray-300"
                    }"></i>`
                )
                .join("");

              const testimonialCard = `
                        <div class="bg-white rounded-lg shadow-lg p-8">
                            <div class="flex items-center mb-4">
                                <img src="https://placehold.co/50x50/E2E8F0/4A5568?text=${review.name
                                  .substring(0, 1)
                                  .toUpperCase()}" alt="User" class="w-12 h-12 rounded-full mr-4">
                                <div>
                                    <p class="font-bold text-gray-800">${
                                      review.name
                                    }</p>
                                    <div class="text-yellow-400">${starsHTML}</div>
                                </div>
                            </div>
                            <p class="text-gray-600 italic">"${
                              review.review
                            }"</p>
                        </div>`;
              testimonialsContainer.innerHTML += testimonialCard;
            });
          } catch (error) {
            console.error("Error fetching reviews: ", error);
            testimonialsContainer.innerHTML = "<p>Could not load reviews.</p>";
          }
        };

        // --- PUBLIC FORM SUBMISSIONS ---
        // REPLACE WITH THIS ENTIRE BLOCK
        // --- PUBLIC FORM SUBMISSIONS ---
        document
          .getElementById("booking-form")
          .addEventListener("submit", async (e) => {
            e.preventDefault();
            const formMessage = document.getElementById("form-message");
            const formData = Object.fromEntries(
              new FormData(e.target).entries()
            );
            const bookingData = {
              ...formData,
              status: "pending",
              payment: "unpaid",
              createdAt: firebase.firestore.FieldValue.serverTimestamp(),
            };

            formMessage.textContent = "Processing your booking...";
            try {
              // 1. IT SAVES THE BOOKING TO YOUR DATABASE FIRST
              await bookingsCollection.add(bookingData);

              // 2. THEN IT CREATES THE WHATSAPP MESSAGE (YOUR CODE IS ALREADY HERE!)
              const message = `Hello, I want to book a service:\n\n*Name:* ${bookingData.name}\n*Phone:* ${bookingData.phone}\n*Service:* ${bookingData.service}\n*Date:* ${bookingData.date}`;

              // 3. IT CREATES THE WHATSAPP URL
              const whatsappUrl = `https://wa.me/${BUSINESS_PHONE}?text=${encodeURIComponent(
                message
              )}`;

              formMessage.textContent =
                "Booking successful! Redirecting to WhatsApp...";

              // 4. IT OPENS WHATSAPP AFTER A 2-SECOND DELAY
              setTimeout(() => {
                window.open(whatsappUrl, "_blank");
                e.target.reset();
                formMessage.textContent = "";
              }, 2000);
            } catch (error) {
              console.error("Error adding booking: ", error);
              formMessage.textContent =
                "Error submitting booking. Please try again.";
            }
          });
        document.getElementById("date").min = new Date()
          .toISOString()
          .split("T")[0];

        const reviewForm = document.getElementById("review-form");
        const ratingValueInput = document.getElementById("rating-value");
        const stars = document.querySelectorAll("#star-rating-input .fa-star");
        stars.forEach((star) => {
          star.addEventListener("click", function () {
            ratingValueInput.value = this.dataset.value;
            stars.forEach((s, i) =>
              s.classList.toggle("selected", i < ratingValueInput.value)
            );
          });
        });

        reviewForm.addEventListener("submit", async (e) => {
          e.preventDefault();
          const formMessage = document.getElementById("review-form-message");
          if (ratingValueInput.value === "0") {
            formMessage.textContent = "Please select a star rating.";
            return;
          }
          const reviewData = {
            name: document.getElementById("review-name").value,
            rating: parseInt(ratingValueInput.value, 10),
            review: document.getElementById("review-text").value,
            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          };

          formMessage.textContent = "Submitting your review...";
          try {
            await reviewsCollection.add(reviewData);
            formMessage.textContent = "Thank you for your review!";
            e.target.reset();
            ratingValueInput.value = "0";
            stars.forEach((s) => s.classList.remove("selected"));
            setTimeout(() => {
              formMessage.textContent = "";
              renderReviews(); // Re-render reviews to show the new one
            }, 3000);
          } catch (error) {
            console.error("Error submitting review:", error);
            formMessage.textContent =
              "Could not submit review. Please try again.";
          }
        });

        // --- AUTHENTICATION ---
        document
          .getElementById("login-form")
          .addEventListener("submit", async (e) => {
            e.preventDefault();
            const email = document.getElementById("login-email").value;
            const password = document.getElementById("login-password").value;
            const errorMessage = document.getElementById("error-message");
            errorMessage.textContent = "";

            try {
              await auth.signInWithEmailAndPassword(email, password);
              // onAuthStateChanged will handle the view change
            } catch (error) {
              errorMessage.textContent = "Invalid email or password.";
              console.error("Login failed:", error);
            }
          });

        document
          .getElementById("logout-btn")
          .addEventListener("click", () => auth.signOut());

        auth.onAuthStateChanged((user) => {
          if (user) {
            showDashboardView();
          } else {
            showMainView();
          }
        });

        // --- ADMIN PANEL FUNCTIONS ---
        const renderAllAdmin = () => {
          renderAdminServices();
          renderAdminBookings();
          renderAdminReviews();
          renderAdminSummary();
        };

        // Admin Services Management
        const serviceModal = document.getElementById("service-modal");
        const serviceForm = document.getElementById("service-form");
        const servicesTableBody = document.getElementById(
          "services-table-body"
        );

        const openServiceModal = (service = null) => {
          serviceForm.reset();
          if (service) {
            document.getElementById("service-modal-title").textContent =
              "Edit Service";
            document.getElementById("service-id").value = service.id;
            document.getElementById("service-title").value = service.title;
            document.getElementById("service-description").value =
              service.description.replace(/\\n/g, "\n");
            document.getElementById("service-price").value = service.price;
            document.getElementById("service-icon").value = service.icon;
          } else {
            document.getElementById("service-modal-title").textContent =
              "Add New Service";
            document.getElementById("service-id").value = "";
          }
          serviceModal.classList.remove("hidden", "opacity-0");
        };

        const closeServiceModal = () =>
          serviceModal.classList.add("hidden", "opacity-0");

        document
          .getElementById("add-service-btn")
          .addEventListener("click", () => openServiceModal());
        document
          .getElementById("cancel-service-form")
          .addEventListener("click", closeServiceModal);

        serviceForm.addEventListener("submit", async (e) => {
          e.preventDefault();
          const id = document.getElementById("service-id").value;
          const serviceData = {
            title: document.getElementById("service-title").value,
            description: document
              .getElementById("service-description")
              .value.replace(/\n/g, "\\n"),
            price: document.getElementById("service-price").value,
            icon: document.getElementById("service-icon").value,
          };

          try {
            if (id) {
              await servicesCollection.doc(id).update(serviceData);
            } else {
              await servicesCollection.add(serviceData);
            }
            closeServiceModal();
            renderServices(); // Update public view
            renderAdminServices(); // Update admin view
          } catch (error) {
            console.error("Error saving service: ", error);
            alert("Could not save service. Check console for details.");
          }
        });

        const renderAdminServices = async () => {
          servicesTableBody.innerHTML = "";
          const snapshot = await servicesCollection.get();
          snapshot.forEach((doc) => {
            const service = { id: doc.id, ...doc.data() };
            const row = document.createElement("tr");
            row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${service.title}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">${service.price}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button data-id="${service.id}" class="edit-service-btn text-indigo-600 hover:text-indigo-900 mr-4">Edit</button>
                        <button data-id="${service.id}" class="delete-service-btn text-red-600 hover:text-red-900">Delete</button>
                    </td>`;
            servicesTableBody.appendChild(row);
          });
        };

        servicesTableBody.addEventListener("click", async (e) => {
          const id = e.target.dataset.id;
          if (e.target.classList.contains("edit-service-btn")) {
            const doc = await servicesCollection.doc(id).get();
            openServiceModal({ id: doc.id, ...doc.data() });
          }
          if (e.target.classList.contains("delete-service-btn")) {
            if (confirm("Are you sure you want to delete this service?")) {
              await servicesCollection.doc(id).delete();
              renderServices();
              renderAdminServices();
            }
          }
        });

        // Admin Bookings & Reviews Management
        const bookingsTableBody = document.getElementById(
          "bookings-table-body"
        );
        const reviewsTableBody = document.getElementById("reviews-table-body");

        const renderAdminBookings = async () => {
          bookingsTableBody.innerHTML = "";
          const snapshot = await bookingsCollection
            .orderBy("createdAt", "desc")
            .get();
          snapshot.forEach((doc) => {
            const booking = { id: doc.id, ...doc.data() };
            const row = document.createElement("tr");
            row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">${
                          booking.name
                        }</div>
                        <div class="text-sm text-gray-500">${
                          booking.phone
                        }</div>
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-700">${
                      booking.service
                    }</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">${new Date(
                      booking.date
                    ).toLocaleDateString()}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <select data-id="${
                          booking.id
                        }" data-type="status" class="status-select rounded-md border-gray-300">
                            <option value="pending" ${
                              booking.status === "pending" ? "selected" : ""
                            }>Pending</option>
                            <option value="complete" ${
                              booking.status === "complete" ? "selected" : ""
                            }>Complete</option>
                        </select>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <select data-id="${
                          booking.id
                        }" data-type="payment" class="payment-select rounded-md border-gray-300">
                            <option value="unpaid" ${
                              booking.payment === "unpaid" ? "selected" : ""
                            }>Unpaid</option>
                            <option value="paid" ${
                              booking.payment === "paid" ? "selected" : ""
                            }>Paid</option>
                        </select>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button data-id="${
                          booking.id
                        }" class="delete-booking-btn text-red-600 hover:text-red-900"><i class="fas fa-trash"></i></button>
                    </td>`;
            bookingsTableBody.appendChild(row);
          });
        };

        bookingsTableBody.addEventListener("change", async (e) => {
          if (e.target.matches(".status-select, .payment-select")) {
            const id = e.target.dataset.id;
            const type = e.target.dataset.type;
            const value = e.target.value;
            await bookingsCollection.doc(id).update({ [type]: value });
            renderAdminSummary(); // Update summary when status/payment changes
          }
        });

        bookingsTableBody.addEventListener("click", async (e) => {
          const button = e.target.closest(".delete-booking-btn");
          if (button) {
            const id = button.dataset.id;
            if (confirm("Are you sure you want to delete this booking?")) {
              await bookingsCollection.doc(id).delete();
              renderAdminBookings();
              renderAdminSummary();
            }
          }
        });

        const renderAdminReviews = async () => {
          reviewsTableBody.innerHTML = "";
          const snapshot = await reviewsCollection
            .orderBy("createdAt", "desc")
            .get();
          snapshot.forEach((doc) => {
            const review = { id: doc.id, ...doc.data() };
            const starsHTML = Array(5)
              .fill(0)
              .map(
                (_, i) =>
                  `<i class="fas fa-star ${
                    i < review.rating ? "text-yellow-400" : "text-gray-300"
                  }"></i>`
              )
              .join("");
            const row = document.createElement("tr");
            row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${review.name}</td>
                    <td class="px-6 py-4 max-w-sm text-sm text-gray-700 truncate" title="${review.review}">${review.review}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">${starsHTML}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button data-id="${review.id}" class="delete-review-btn text-red-600 hover:text-red-900"><i class="fas fa-trash"></i></button>
                    </td>`;
            reviewsTableBody.appendChild(row);
          });
        };

        reviewsTableBody.addEventListener("click", async (e) => {
          const button = e.target.closest(".delete-review-btn");
          if (button) {
            const id = button.dataset.id;
            if (confirm("Are you sure you want to delete this review?")) {
              await reviewsCollection.doc(id).delete();
              renderReviews(); // update public view
              renderAdminReviews(); // update admin view
            }
          }
        });

        const renderAdminSummary = async () => {
          const snapshot = await bookingsCollection.get();
          let totalRevenue = 0;
          let pendingPayments = 0;
          let completedServices = 0;

          const getPriceFromServiceString = (serviceString) => {
            // This helper function correctly extracts the numeric price.
            // It looks for the Rupee symbol followed by digits.
            const match = serviceString ? serviceString.match(/₹(\d+)/) : null;
            return match ? parseInt(match[1], 10) : 0;
          };

          snapshot.forEach((doc) => {
            const booking = doc.data();
            const price = getPriceFromServiceString(booking.service);

            // 1. Calculate Total Revenue: For services that are COMPLETE and PAID.
            if (booking.status === "complete" && booking.payment === "paid") {
              totalRevenue += price;
            }

            // 2. Calculate Pending Payments: For ANY service that is UNPAID.
            // This is the key fix. It is now independent of the service status.
            if (booking.payment === "unpaid") {
              pendingPayments += price;
            }

            // 3. Count Completed Services: For any service marked as COMPLETE.
            if (booking.status === "complete") {
              completedServices++;
            }
          });

          document.getElementById(
            "total-revenue"
          ).textContent = `₹${totalRevenue.toLocaleString("en-IN")}`;
          document.getElementById(
            "pending-payments"
          ).textContent = `₹${pendingPayments.toLocaleString("en-IN")}`;
          document.getElementById("completed-services").textContent =
            completedServices;
        };

        // --- Initial Page Load ---
        loadTranslations();
        renderServices();
        renderReviews();
      });
    </script>
  </body>
</html>
